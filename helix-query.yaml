version: 1.2

indices:
  website: &website
    include:
      - '/events/**'
    target: /events/query-index.xlsx
    properties:
      title:
        select: head > meta[property="og:title"]
        value: |
          attribute(el, 'content')
      image:
        select: head > meta[property="og:image"]
        value: |
          match(attribute(el, 'content'), 'https:\/\/[^/]+(\/.*)')
      lastModified:
        select: none
        value: |
          parseTimestamp(headers['last-modified'], 'ddd, DD MMM YYYY hh:mm:ss GMT')
      shortTitle:
        select: head > meta[name="short-title"]
        value: |
          attribute(el, 'content')
      robots:
        select: head > meta[name="robots"]
        value: |
          attribute(el, 'content')

  # Tier 1 locales
  de:
    <<: *website
    include:
      - '/de/events/**'
    target: /de/events/query-index.xlsx
  fr:
    <<: *website
    include:
      - '/fr/events/**'
    target: /fr/events/query-index.xlsx
  jp:
    <<: *website
    include:
      - '/jp/events/**'
    target: /jp/events/query-index.xlsx
  uk:
    <<: *website
    include:
      - '/uk/events/**'
    target: /uk/events/query-index.xlsx

  # Tier 2 locales
  dk:
    <<: *website
    include:
      - '/dk/events/**'
    target: /dk/events/query-index.xlsx
  es:
    <<: *website
    include:
      - '/es/events/**'
    target: /es/events/query-index.xlsx
  fi:
    <<: *website
    include:
      - '/fi/events/**'
    target: /fi/events/query-index.xlsx
  it:
    <<: *website
    include:
      - '/it/events/**'
    target: /it/events/query-index.xlsx
  nl:
    <<: *website
    include:
      - '/nl/events/**'
    target: /nl/events/query-index.xlsx
  no:
    <<: *website
    include:
      - '/no/events/**'
    target: /no/events/query-index.xlsx
  se:
    <<: *website
    include:
      - '/se/events/**'
    target: /se/events/query-index.xlsx

  # Tier 3 locales
  au:
    <<: *website
    include:
      - '/au/events/**'
    target: /au/events/query-index.xlsx
  br:
    <<: *website
    include:
      - '/br/events/**'
    target: /br/events/query-index.xlsx
  cn:
    <<: *website
    include:
      - '/cn/events/**'
    target: /cn/events/query-index.xlsx
  kr:
    <<: *website
    include:
      - '/kr/events/**'
    target: /kr/events/query-index.xlsx
  la:
    <<: *website
    include:
      - '/la/events/**'
    target: /la/events/query-index.xlsx
  mx:
    <<: *website
    include:
      - '/mx/events/**'
    target: /mx/events/query-index.xlsx
  tw:
    <<: *website
    include:
      - '/tw/events/**'
    target: /tw/events/query-index.xlsx

  # Tier 4 locales
  ae_ar:
    <<: *website
    include:
      - '/ae_ar/events/**'
    target: /ae_ar/events/query-index.xlsx
  ae_en:
    <<: *website
    include:
      - '/ae_en/events/**'
    target: /ae_en/events/query-index.xlsx
  africa:
    <<: *website
    include:
      - '/africa/events/**'
    target: /africa/events/query-index.xlsx
  ar:
    <<: *website
    include:
      - '/ar/events/**'
    target: /ar/events/query-index.xlsx
  at:
    <<: *website
    include:
      - '/at/events/**'
    target: /at/events/query-index.xlsx
  be_en:
    <<: *website
    include:
      - '/be_en/events/**'
    target: /be_en/events/query-index.xlsx
  be_fr:
    <<: *website
    include:
      - '/be_fr/events/**'
    target: /be_fr/events/query-index.xlsx
  be_nl:
    <<: *website
    include:
      - '/be_nl/events/**'
    target: /be_nl/events/query-index.xlsx
  bg:
    <<: *website
    include:
      - '/bg/events/**'
    target: /bg/events/query-index.xlsx
  ca:
    <<: *website
    include:
      - '/ca/events/**'
    target: /ca/events/query-index.xlsx
  ca_fr:
    <<: *website
    include:
      - '/ca_fr/events/**'
    target: /ca_fr/events/query-index.xlsx
  ch_de:
    <<: *website
    include:
      - '/ch_de/events/**'
    target: /ch_de/events/query-index.xlsx
  ch_fr:
    <<: *website
    include:
      - '/ch_fr/events/**'
    target: /ch_fr/events/query-index.xlsx
  ch_it:
    <<: *website
    include:
      - '/ch_it/events/**'
    target: /ch_it/events/query-index.xlsx
  cl:
    <<: *website
    include:
      - '/cl/events/**'
    target: /cl/events/query-index.xlsx
  co:
    <<: *website
    include:
      - '/co/events/**'
    target: /co/events/query-index.xlsx
  cz:
    <<: *website
    include:
      - '/cz/events/**'
    target: /cz/events/query-index.xlsx
  ee:
    <<: *website
    include:
      - '/ee/events/**'
    target: /ee/events/query-index.xlsx
  gr_en:
    <<: *website
    include:
      - '/gr_en/events/**'
    target: /gr_en/events/query-index.xlsx
  hk_en:
    <<: *website
    include:
      - '/hk_en/events/**'
    target: /hk_en/events/query-index.xlsx
  hk_zh:
    <<: *website
    include:
      - '/hk_zh/events/**'
    target: /hk_zh/events/query-index.xlsx
  hu:
    <<: *website
    include:
      - '/hu/events/**'
    target: /hu/events/query-index.xlsx
  id_en:
    <<: *website
    include:
      - '/id_en/events/**'
    target: /id_en/events/query-index.xlsx
  id_id:
    <<: *website
    include:
      - '/id_id/events/**'
    target: /id_id/events/query-index.xlsx
  ie:
    <<: *website
    include:
      - '/ie/events/**'
    target: /ie/events/query-index.xlsx
  il_en:
    <<: *website
    include:
      - '/il_en/events/**'
    target: /il_en/events/query-index.xlsx
  il_he:
    <<: *website
    include:
      - '/il_he/events/**'
    target: /il_he/events/query-index.xlsx
  in:
    <<: *website
    include:
      - '/in/events/**'
    target: /in/events/query-index.xlsx
  in_hi:
    <<: *website
    include:
      - '/in_hi/events/**'
    target: /in_hi/events/query-index.xlsx
  lt:
    <<: *website
    include:
      - '/lt/events/**'
    target: /lt/events/query-index.xlsx
  lu_de:
    <<: *website
    include:
      - '/lu_de/events/**'
    target: /lu_de/events/query-index.xlsx
  lu_en:
    <<: *website
    include:
      - '/lu_en/events/**'
    target: /lu_en/events/query-index.xlsx
  lu_fr:
    <<: *website
    include:
      - '/lu_fr/events/**'
    target: /lu_fr/events/query-index.xlsx
  lv:
    <<: *website
    include:
      - '/lv/events/**'
    target: /lv/events/query-index.xlsx
  mena_ar:
    <<: *website
    include:
      - '/mena_ar/events/**'
    target: /mena_ar/events/query-index.xlsx
  mena_en:
    <<: *website
    include:
      - '/mena_en/events/**'
    target: /mena_en/events/query-index.xlsx
  my_en:
    <<: *website
    include:
      - '/my_en/events/**'
    target: /my_en/events/query-index.xlsx
  my_ms:
    <<: *website
    include:
      - '/my_ms/events/**'
    target: /my_ms/events/query-index.xlsx
  nz:
    <<: *website
    include:
      - '/nz/events/**'
    target: /nz/events/query-index.xlsx
  pe:
    <<: *website
    include:
      - '/pe/events/**'
    target: /pe/events/query-index.xlsx
  ph_en:
    <<: *website
    include:
      - '/ph_en/events/**'
    target: /ph_en/events/query-index.xlsx
  ph_fil:
    <<: *website
    include:
      - '/ph_fil/events/**'
    target: /ph_fil/events/query-index.xlsx
  pl:
    <<: *website
    include:
      - '/pl/events/**'
    target: /pl/events/query-index.xlsx
  pt:
    <<: *website
    include:
      - '/pt/events/**'
    target: /pt/events/query-index.xlsx
  ro:
    <<: *website
    include:
      - '/ro/events/**'
    target: /ro/events/query-index.xlsx
  ru:
    <<: *website
    include:
      - '/ru/events/**'
    target: /ru/events/query-index.xlsx
  sa_ar:
    <<: *website
    include:
      - '/sa_ar/events/**'
    target: /sa_ar/events/query-index.xlsx
  sa_en:
    <<: *website
    include:
      - '/sa_en/events/**'
    target: /sa_en/events/query-index.xlsx
  sg:
    <<: *website
    include:
      - '/sg/events/**'
    target: /sg/events/query-index.xlsx
  si:
    <<: *website
    include:
      - '/si/events/**'
    target: /si/events/query-index.xlsx
  sk:
    <<: *website
    include:
      - '/sk/events/**'
    target: /sk/events/query-index.xlsx
  th_en:
    <<: *website
    include:
      - '/th_en/events/**'
    target: /th_en/events/query-index.xlsx
  th_th:
    <<: *website
    include:
      - '/th_th/events/**'
    target: /th_th/events/query-index.xlsx
  tr:
    <<: *website
    include:
      - '/tr/events/**'
    target: /tr/events/query-index.xlsx
  ua:
    <<: *website
    include:
      - '/ua/events/**'
    target: /ua/events/query-index.xlsx
  vn_en:
    <<: *website
    include:
      - '/vn_en/events/**'
    target: /vn_en/events/query-index.xlsx
  vn_vi:
    <<: *website
    include:
      - '/vn_vi/events/**'
    target: /vn_vi/events/query-index.xlsx
  